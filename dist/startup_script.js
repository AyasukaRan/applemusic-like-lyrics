(()=>{var a=()=>{},u=a,s=a,c=a;var m=channel.call;channel.call=function(e,...n){if(e==="storage.downloadscanner")s(e,...n,new Error().stack);else return m(e,...n)};function g(o,e){let n=this,t=function(...r){var i={args:r,stopped:!1,value:void 0};return o&&o(i),i.stopped||(i.value=n.apply(this,i.args),e&&e(i)),i.value};return t.name=`${n.name}_bindEffect`,t.wrapperType="bindEffect",t.originalFunc=n,t.beforeProcess=o,t.afterProcess=e,t}function y(o,...e){let n=this,t=function(...r){let i=[...e,...r];return n.apply(o||window,i)};return t.name=`${n.name}_bindPrepend`,t.wrapperType="bindPrepend",t.originalFunc=n,t.prependArgs=e,t}function h(o,...e){let n=this,t=function(...r){let i=[...r,...e];return n.apply(o||window,i)};return t.name=`${n.name}_bindAppend`,t.wrapperType="bindAppend",t.originalFunc=n,t.appendArgs=e,t}var w=[h,y,g];window.FakeFunction=new Proxy({},{set(o,e,n){let t=w.pop();return t?(Function.prototype[e]=t,s("\u5DF2 Hook \u51FD\u6570",e,n,"\u5230",t)):(c("\u8B66\u544A\uFF1A\u6CA1\u6709\u53EF\u7528\u51FD\u6570\u53EF\u4EE5\u7528\u4E8E Hook",e,n),Function.prototype[e]=n),!0}});function F(o,e){let n=document.getElementById(o);if(n){let t=new DOMParser().parseFromString(n.innerText,"text/html");e(t);let r=t.body.innerHTML;r?(u(r),n.innerText=r,s("\u5E03\u5C40",o,"\u4FEE\u6539\u5B8C\u6210")):c("\u5E03\u5C40\u4FEE\u6539\u5931\u8D25\uFF1A\u627E\u4E0D\u5230\u6839\u8282\u70B9\u7684 innerHTML",o)}else c("\u5E03\u5C40\u4FEE\u6539\u5931\u8D25\uFF1A\u627E\u4E0D\u5230\u6307\u5B9A ID \u7684\u6A21\u677F\u5E03\u5C40\u5143\u7D20",o)}function b(o,e){let n=document.getElementById(o);if(n){let t=e(n.innerText);u(t),n.innerText=t,s("\u5E03\u5C40",o,"\u4FEE\u6539\u5B8C\u6210")}else c("\u5E03\u5C40\u4FEE\u6539\u5931\u8D25\uFF1A\u627E\u4E0D\u5230\u6307\u5B9A ID \u7684\u6A21\u677F\u5E03\u5C40\u5143\u7D20",o)}function f(o,e,n){return e>0?o.substring(0,e)+n+o.substring(e):n+o}window.addEventListener("DOMContentLoaded",()=>{F("m-fdtt-module",o=>{let e=o.querySelector(".head.j-fflag"),n=o.querySelector(".sd.j-flag");!!e&&!!n?(e.parentNode&&e.parentNode.removeChild(e),n.appendChild(e),s("\u6210\u529F\u4FEE\u6539\u4E86\u6B4C\u540D\u5E03\u5C40")):c("\u6B4C\u540D\u5E03\u5C40\u4FEE\u6539\u5931\u8D25\uFF01");let t=o.querySelector(".mn.j-flag"),r=document.createElement("div");r.id="applemusic-like-lyrics-view",t?.parentNode?.appendChild(r),t&&t.setAttribute("style","display:none;")}),b("m-fdtt-show-track-title-detail",o=>{let e=o,n=/<h2.*?<\/h2>/m,t=/<\/h1>/m,r=e.match(n)?.[0]||"";e=e.replace(n,"");let i=e.match(t);i&&(e=f(e,i.index||0+i[0].length,r)),e=e.replace("\u6B4C\u624B: ",""),e=e.replace("\u4E13\u8F91: ",""),e=e.replace("\u6765\u6E90: ","");let l=0;for(let p=0;p<2;p++)if(l=e.indexOf('<li class="f-thide f-ust f-ust-1">',l),l!==-1&&(l=e.indexOf("</li>",l),l!==-1)){l+=5;let d='<li class="f-thide f-ust f-ust-1 spacer"> \u2014 <li/>';e=f(e,l,d),l+=d.length}return e})});})();
