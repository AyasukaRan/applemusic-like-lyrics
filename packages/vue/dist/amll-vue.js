"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("vue"),d=require("@applemusic-like-lyrics/core"),g=l.defineComponent({inheritAttrs:!1,__name:"LyricPlayer",props:{disabled:{type:Boolean},alignAnchor:{},alignPosition:{},enableSpring:{type:Boolean},enableBlur:{type:Boolean},enableScale:{type:Boolean},lyricLines:{},currentTime:{},linePosXSpringParams:{},linePosYSpringParams:{},lineScaleSpringParams:{},bottomLine:{}},emits:["line-click","line-contextmenu"],setup(u,{expose:f,emit:r}){const a=u,t=l.ref(),e=l.ref(),c=n=>r("line-click",n),m=n=>r("line-contextmenu",n);return l.onMounted(()=>{t.value&&(e.value=new d.LyricPlayer,t.value.appendChild(e.value.getElement()),e.value.addEventListener("line-click",c),e.value.addEventListener("line-contextmenu",m))}),l.onUnmounted(()=>{e.value&&(e.value.removeEventListener("line-click",c),e.value.removeEventListener("line-contextmenu",m),e.value.dispose())}),l.watchEffect(n=>{if(!a.disabled){let i=!1,o=-1;const s=p=>{var v;i||(o===-1&&(o=p),(v=e.value)==null||v.update(p-o),o=p,requestAnimationFrame(s))};requestAnimationFrame(s),n(()=>{i=!0})}}),l.watchEffect(()=>{var n;a.alignAnchor!==void 0&&((n=e.value)==null||n.setAlignAnchor(a.alignAnchor))}),l.watchEffect(()=>{var n;a.alignPosition!==void 0&&((n=e.value)==null||n.setAlignPosition(a.alignPosition))}),l.watchEffect(()=>{var n,i;a.enableSpring!==void 0?(n=e.value)==null||n.setEnableSpring(a.enableSpring):(i=e.value)==null||i.setEnableSpring(!0)}),l.watchEffect(()=>{var n,i;a.enableBlur!==void 0?(n=e.value)==null||n.setEnableBlur(a.enableBlur):(i=e.value)==null||i.setEnableBlur(!0)}),l.watchEffect(()=>{var n,i;a.enableScale!==void 0?(n=e.value)==null||n.setEnableScale(a.enableScale):(i=e.value)==null||i.setEnableScale(!0)}),l.watchEffect(()=>{var n;a.lyricLines!==void 0&&((n=e.value)==null||n.setLyricLines(a.lyricLines))}),l.watchEffect(()=>{var n;a.currentTime!==void 0&&((n=e.value)==null||n.setCurrentTime(a.currentTime))}),l.watchEffect(()=>{var n;a.linePosXSpringParams!==void 0&&((n=e.value)==null||n.setLinePosXSpringParams(a.linePosXSpringParams))}),l.watchEffect(()=>{var n;a.linePosYSpringParams!==void 0&&((n=e.value)==null||n.setLinePosYSpringParams(a.linePosYSpringParams))}),l.watchEffect(()=>{var n;a.lineScaleSpringParams!==void 0&&((n=e.value)==null||n.setLineScaleSpringParams(a.lineScaleSpringParams))}),f({lyricPlayer:e,wrapperEl:t}),(n,i)=>{var o,s;return l.openBlock(),l.createElementBlock(l.Fragment,null,[l.createElementVNode("div",l.mergeProps({ref_key:"wrapperRef",ref:t},n.$attrs),null,16),(o=e.value)!=null&&o.getBottomLineElement()&&a.bottomLine?(l.openBlock(),l.createBlock(l.Teleport,{key:0,to:(s=e.value)==null?void 0:s.getBottomLineElement()},null,8,["to"])):l.createCommentVNode("",!0)],64)}}}),S=l.defineComponent({__name:"BackgroundRender",props:{albumImageUrl:{},fps:{},playing:{type:Boolean},flowSpeed:{},renderScale:{}},setup(u,{expose:f}){const r=u,a=l.ref(),t=l.ref();return l.onMounted(()=>{if(a.value){t.value=new d.BackgroundRender;const e=t.value.getElement();e.style.width="100%",e.style.height="100%",a.value.appendChild(e)}}),l.onUnmounted(()=>{t.value&&t.value.dispose()}),l.watchEffect(()=>{var e;r.albumImageUrl&&((e=t.value)==null||e.setAlbumImage(r.albumImageUrl))}),l.watchEffect(()=>{var e;r.fps&&((e=t.value)==null||e.setFPS(r.fps))}),l.watchEffect(()=>{var e,c;r.playing?(e=t.value)==null||e.pause():(c=t.value)==null||c.resume()}),l.watchEffect(()=>{var e;r.flowSpeed&&((e=t.value)==null||e.setFlowSpeed(r.flowSpeed))}),l.watchEffect(()=>{var e;r.renderScale&&((e=t.value)==null||e.setRenderScale(r.renderScale))}),f({bgRender:t,wrapperEl:a}),(e,c)=>(l.openBlock(),l.createElementBlock("div",{ref_key:"wrapperRef",ref:a},null,512))}});exports.BackgroundRender=S;exports.LyricPlayer=g;
//# sourceMappingURL=amll-vue.js.map
