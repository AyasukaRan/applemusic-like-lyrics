"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),g=require("@applemusic-like-lyrics/core"),v=n.defineComponent({inheritAttrs:!1,__name:"LyricPlayer",props:{disabled:{type:Boolean},alignAnchor:{},alignPosition:{},enableSpring:{type:Boolean},enableBlur:{type:Boolean},lyricLines:{},currentTime:{},linePosXSpringParams:{},linePosYSpringParams:{},lineScaleSpringParams:{},bottomLine:{}},emits:["line-click","line-contextmenu"],setup(s,{expose:u,emit:r}){const l=s,t=n.ref(),e=n.ref(),o=a=>r("line-click",a),m=a=>r("line-contextmenu",a);return n.onMounted(()=>{t.value&&(e.value=new g.LyricPlayer,t.value.appendChild(e.value.getElement()),e.value.addEventListener("line-click",o),e.value.addEventListener("line-contextmenu",m))}),n.onUnmounted(()=>{e.value&&(e.value.removeEventListener("line-click",o),e.value.removeEventListener("line-contextmenu",m),e.value.dispose())}),n.watchEffect(a=>{if(!l.disabled){let f=!1,i=-1;const c=p=>{var d;f||(i===-1&&(i=p),(d=e.value)==null||d.update(p-i),i=p,requestAnimationFrame(c))};requestAnimationFrame(c),a(()=>{f=!0})}}),n.watchEffect(()=>{var a;l.alignAnchor&&((a=e.value)==null||a.setAlignAnchor(l.alignAnchor))}),n.watchEffect(()=>{var a;l.alignPosition&&((a=e.value)==null||a.setAlignPosition(l.alignPosition))}),n.watchEffect(()=>{var a;l.enableSpring&&((a=e.value)==null||a.setEnableSpring(l.enableSpring))}),n.watchEffect(()=>{var a;l.enableBlur&&((a=e.value)==null||a.setEnableBlur(l.enableBlur))}),n.watchEffect(()=>{var a;l.lyricLines&&((a=e.value)==null||a.setLyricLines(l.lyricLines))}),n.watchEffect(()=>{var a;l.currentTime&&((a=e.value)==null||a.setCurrentTime(l.currentTime))}),n.watchEffect(()=>{var a;l.linePosXSpringParams&&((a=e.value)==null||a.setLinePosXSpringParams(l.linePosXSpringParams))}),n.watchEffect(()=>{var a;l.linePosYSpringParams&&((a=e.value)==null||a.setLinePosYSpringParams(l.linePosYSpringParams))}),n.watchEffect(()=>{var a;l.lineScaleSpringParams&&((a=e.value)==null||a.setLineScaleSpringParams(l.lineScaleSpringParams))}),u({lyricPlayer:e,wrapperEl:t}),(a,f)=>{var i,c;return n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",n.mergeProps({ref_key:"wrapperRef",ref:t},a.$attrs),null,16),(i=e.value)!=null&&i.getBottomLineElement()&&l.bottomLine?(n.openBlock(),n.createBlock(n.Teleport,{key:0,to:(c=e.value)==null?void 0:c.getBottomLineElement()},null,8,["to"])):n.createCommentVNode("",!0)],64)}}}),P=n.defineComponent({__name:"BackgroundRender",props:{albumImageUrl:{},fps:{},playing:{type:Boolean},flowSpeed:{},renderScale:{}},setup(s,{expose:u}){const r=s,l=n.ref(),t=n.ref();return n.onMounted(()=>{if(l.value){t.value=new g.BackgroundRender;const e=t.value.getElement();e.style.width="100%",e.style.height="100%",l.value.appendChild(e)}}),n.onUnmounted(()=>{t.value&&t.value.dispose()}),n.watchEffect(()=>{var e;r.albumImageUrl&&((e=t.value)==null||e.setAlbumImage(r.albumImageUrl))}),n.watchEffect(()=>{var e;r.fps&&((e=t.value)==null||e.setFPS(r.fps))}),n.watchEffect(()=>{var e,o;r.playing?(e=t.value)==null||e.pause():(o=t.value)==null||o.resume()}),n.watchEffect(()=>{var e;r.flowSpeed&&((e=t.value)==null||e.setFlowSpeed(r.flowSpeed))}),n.watchEffect(()=>{var e;r.renderScale&&((e=t.value)==null||e.setRenderScale(r.renderScale))}),u({bgRender:t,wrapperEl:l}),(e,o)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"wrapperRef",ref:l},null,512))}});exports.BackgroundRender=P;exports.LyricPlayer=v;
//# sourceMappingURL=amll-vue.js.map
