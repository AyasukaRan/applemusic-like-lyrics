"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("vue"),d=require("@applemusic-like-lyrics/core"),S=n.defineComponent({inheritAttrs:!1,__name:"LyricPlayer",props:{disabled:{type:Boolean},alignAnchor:{},alignPosition:{},enableSpring:{type:Boolean},enableBlur:{type:Boolean},enableScale:{type:Boolean},hidePassedLines:{type:Boolean},lyricLines:{},currentTime:{},linePosXSpringParams:{},linePosYSpringParams:{},lineScaleSpringParams:{},bottomLine:{}},emits:["line-click","line-contextmenu"],setup(u,{expose:f,emit:i}){const l=u,r=i,t=n.ref(),a=n.ref(),m=e=>r("line-click",e),v=e=>r("line-contextmenu",e);return n.onMounted(()=>{t.value&&(a.value=new d.LyricPlayer,t.value.appendChild(a.value.getElement()),a.value.addEventListener("line-click",m),a.value.addEventListener("line-contextmenu",v))}),n.onUnmounted(()=>{a.value&&(a.value.removeEventListener("line-click",m),a.value.removeEventListener("line-contextmenu",v),a.value.dispose())}),n.watchEffect(e=>{if(!l.disabled){let o=!1,c=-1;const s=p=>{var g;o||(c===-1&&(c=p),(g=a.value)==null||g.update(p-c),c=p,requestAnimationFrame(s))};requestAnimationFrame(s),e(()=>{o=!0})}}),n.watchEffect(()=>{var e;l.alignAnchor!==void 0&&((e=a.value)==null||e.setAlignAnchor(l.alignAnchor))}),n.watchEffect(()=>{var e;l.hidePassedLines!==void 0&&((e=a.value)==null||e.setHidePassedLines(l.hidePassedLines))}),n.watchEffect(()=>{var e;l.alignPosition!==void 0&&((e=a.value)==null||e.setAlignPosition(l.alignPosition))}),n.watchEffect(()=>{var e,o;l.enableSpring!==void 0?(e=a.value)==null||e.setEnableSpring(l.enableSpring):(o=a.value)==null||o.setEnableSpring(!0)}),n.watchEffect(()=>{var e,o;l.enableBlur!==void 0?(e=a.value)==null||e.setEnableBlur(l.enableBlur):(o=a.value)==null||o.setEnableBlur(!0)}),n.watchEffect(()=>{var e,o;l.enableScale!==void 0?(e=a.value)==null||e.setEnableScale(l.enableScale):(o=a.value)==null||o.setEnableScale(!0)}),n.watchEffect(()=>{var e;l.lyricLines!==void 0&&((e=a.value)==null||e.setLyricLines(l.lyricLines))}),n.watchEffect(()=>{var e;l.currentTime!==void 0&&((e=a.value)==null||e.setCurrentTime(l.currentTime))}),n.watchEffect(()=>{var e;l.linePosXSpringParams!==void 0&&((e=a.value)==null||e.setLinePosXSpringParams(l.linePosXSpringParams))}),n.watchEffect(()=>{var e;l.linePosYSpringParams!==void 0&&((e=a.value)==null||e.setLinePosYSpringParams(l.linePosYSpringParams))}),n.watchEffect(()=>{var e;l.lineScaleSpringParams!==void 0&&((e=a.value)==null||e.setLineScaleSpringParams(l.lineScaleSpringParams))}),f({lyricPlayer:a,wrapperEl:t}),(e,o)=>{var c,s;return n.openBlock(),n.createElementBlock(n.Fragment,null,[n.createElementVNode("div",n.mergeProps({ref_key:"wrapperRef",ref:t},e.$attrs),null,16),(c=a.value)!=null&&c.getBottomLineElement()&&l.bottomLine?(n.openBlock(),n.createBlock(n.Teleport,{key:0,to:(s=a.value)==null?void 0:s.getBottomLineElement()},null,8,["to"])):n.createCommentVNode("",!0)],64)}}}),E=n.defineComponent({__name:"BackgroundRender",props:{albumImageUrl:{},fps:{},playing:{type:Boolean},flowSpeed:{},renderScale:{},renderer:{type:Function}},setup(u,{expose:f}){const i=u,l=n.ref(),r=n.ref();return n.onMounted(()=>{if(l.value){r.value=d.BackgroundRender.new(i.renderer??d.PixiRenderer);const t=r.value.getElement();t.style.width="100%",t.style.height="100%",l.value.appendChild(t)}}),n.onUnmounted(()=>{r.value&&r.value.dispose()}),n.watchEffect(()=>{var t;i.albumImageUrl&&((t=r.value)==null||t.setAlbumImage(i.albumImageUrl))}),n.watchEffect(()=>{var t;i.fps&&((t=r.value)==null||t.setFPS(i.fps))}),n.watchEffect(()=>{var t,a;i.playing?(t=r.value)==null||t.pause():(a=r.value)==null||a.resume()}),n.watchEffect(()=>{var t;i.flowSpeed&&((t=r.value)==null||t.setFlowSpeed(i.flowSpeed))}),n.watchEffect(()=>{var t;i.renderScale&&((t=r.value)==null||t.setRenderScale(i.renderScale))}),f({bgRender:r,wrapperEl:l}),(t,a)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"wrapperRef",ref:l},null,512))}});exports.BackgroundRender=E;exports.LyricPlayer=S;
//# sourceMappingURL=amll-vue.cjs.map
