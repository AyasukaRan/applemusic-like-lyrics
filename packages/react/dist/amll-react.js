"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("react/jsx-runtime"),B=require("@applemusic-like-lyrics/core"),r=require("react"),F=require("react-dom"),g=r.forwardRef(({albumImageUrl:d,fps:i,playing:o,flowSpeed:a,renderScale:E,...R},m)=>{const c=r.useRef(),f=r.useRef(null);return r.useEffect(()=>(c.current=new B.BackgroundRender,()=>{var u;(u=c.current)==null||u.dispose()}),[]),r.useEffect(()=>{var u;d&&((u=c.current)==null||u.setAlbumImage(d))},[d]),r.useEffect(()=>{var u;i&&((u=c.current)==null||u.setFPS(i))},[i]),r.useEffect(()=>{var u,s,t;o===void 0?(u=c.current)==null||u.resume():o?(s=c.current)==null||s.resume():(t=c.current)==null||t.pause()},[o]),r.useEffect(()=>{var u;a&&((u=c.current)==null||u.setFlowSpeed(a))},[a]),r.useEffect(()=>{var u;E&&((u=c.current)==null||u.setRenderScale(E))},[E]),r.useEffect(()=>{var u;if(c.current){const s=c.current.getElement();s.style.width="100%",s.style.height="100%",(u=f.current)==null||u.appendChild(s)}}),r.useImperativeHandle(m,()=>({wrapperEl:f.current,bgRender:c.current}),[f.current,c.current]),p.jsx("div",{...R,ref:f})}),h=r.forwardRef(({disabled:d,alignAnchor:i,enableSpring:o,enableBlur:a,lyricLines:E,currentTime:R,linePosXSpringParams:m,linePosYSpringParams:c,lineScaleSpringParams:f,...u},s)=>{var w,q;const t=r.useRef(),L=r.useRef(null);return r.useEffect(()=>(t.current=new B.LyricPlayer,()=>{var e;(e=t.current)==null||e.dispose()}),[]),r.useEffect(()=>{if(!d){let e=!1,n=-1;const y=l=>{var v;e||(n===-1&&(n=l),(v=t.current)==null||v.update(l-n),n=l,requestAnimationFrame(y))};return requestAnimationFrame(y),()=>{e=!0}}},[d]),r.useEffect(()=>{var e;t.current&&((e=L.current)==null||e.appendChild(t.current.getElement()))},[L.current]),r.useEffect(()=>{var e;i&&((e=t.current)==null||e.setAlignAnchor(i))},[i]),r.useEffect(()=>{var e,n;o?(e=t.current)==null||e.setEnableSpring(o):(n=t.current)==null||n.setEnableSpring(!0)},[o]),r.useEffect(()=>{var e;(e=t.current)==null||e.setEnableBlur(a??!0)},[a]),r.useEffect(()=>{var e,n,y,l;E?((e=t.current)==null||e.setLyricLines(E),(n=t.current)==null||n.update()):((y=t.current)==null||y.setLyricLines([]),(l=t.current)==null||l.update())},[E]),r.useEffect(()=>{var e,n;R?(e=t.current)==null||e.setCurrentTime(R):(n=t.current)==null||n.setCurrentTime(0)},[R]),r.useEffect(()=>{var e;m&&((e=t.current)==null||e.setLinePosXSpringParams(m))},[m]),r.useEffect(()=>{var e;c&&((e=t.current)==null||e.setLinePosYSpringParams(c))},[c]),r.useEffect(()=>{var e;f&&((e=t.current)==null||e.setLineScaleSpringParams(f))},[f]),r.useImperativeHandle(s,()=>({wrapperEl:L.current,lyricPlayer:t.current}),[L.current,t.current]),p.jsxs(p.Fragment,{children:[p.jsx("div",{...u,ref:L}),(w=t.current)!=null&&w.getBottomLineElement()&&u.bottomLine?F.createPortal(u.bottomLine,(q=t.current)==null?void 0:q.getBottomLineElement()):null]})});exports.BackgroundRender=g;exports.LyricPlayer=h;
//# sourceMappingURL=amll-react.js.map
