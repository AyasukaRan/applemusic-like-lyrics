"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const q=require("react/jsx-runtime"),x=require("@applemusic-like-lyrics/core"),r=require("react"),k=require("react-dom"),H=r.forwardRef(({albumImageUrl:l,fps:d,playing:E,flowSpeed:o,renderScale:a,staticMode:v,...m},p)=>{const n=r.useRef(),i=r.useRef(null);return r.useEffect(()=>(n.current=new x.BackgroundRender,()=>{var u;(u=n.current)==null||u.dispose()}),[]),r.useEffect(()=>{var u;l&&((u=n.current)==null||u.setAlbumImage(l))},[l]),r.useEffect(()=>{var u;d&&((u=n.current)==null||u.setFPS(d))},[d]),r.useEffect(()=>{var u,s,w;E===void 0?(u=n.current)==null||u.resume():E?(s=n.current)==null||s.resume():(w=n.current)==null||w.pause()},[E]),r.useEffect(()=>{var u;o&&((u=n.current)==null||u.setFlowSpeed(o))},[o]),r.useEffect(()=>{var u;(u=n.current)==null||u.setStaticMode(v)},[v]),r.useEffect(()=>{var u;a&&((u=n.current)==null||u.setRenderScale(a))},[a]),r.useEffect(()=>{var u;if(n.current){const s=n.current.getElement();s.style.width="100%",s.style.height="100%",(u=i.current)==null||u.appendChild(s)}}),r.useImperativeHandle(p,()=>({wrapperEl:i.current,bgRender:n.current}),[i.current,n.current]),q.jsx("div",{...m,ref:i})}),T=r.forwardRef(({disabled:l,alignAnchor:d,alignPosition:E,enableSpring:o,enableBlur:a,enableScale:v,hidePassedLines:m,lyricLines:p,currentTime:n,linePosXSpringParams:i,linePosYSpringParams:u,lineScaleSpringParams:s,bottomLine:w,onLyricLineClick:B,onLyricLineContextMenu:F,...A},L)=>{var h,j;const t=r.useRef(),y=r.useRef(null);return r.useEffect(()=>(t.current=new x.LyricPlayer,()=>{var e;(e=t.current)==null||e.dispose()}),[]),r.useEffect(()=>{if(!l){let e=!1,c=-1;const f=R=>{var g;e||(c===-1&&(c=R),(g=t.current)==null||g.update(R-c),c=R,requestAnimationFrame(f))};return requestAnimationFrame(f),()=>{e=!0}}},[l]),r.useEffect(()=>{var e;t.current&&((e=y.current)==null||e.appendChild(t.current.getElement()))},[y.current]),r.useEffect(()=>{var e;d!==void 0&&((e=t.current)==null||e.setAlignAnchor(d))},[d]),r.useEffect(()=>{var e;m!==void 0&&((e=t.current)==null||e.setHidePassedLines(m))},[m]),r.useEffect(()=>{var e;E!==void 0&&((e=t.current)==null||e.setAlignPosition(E))},[E]),r.useEffect(()=>{var e,c;o!==void 0?(e=t.current)==null||e.setEnableSpring(o):(c=t.current)==null||c.setEnableSpring(!0)},[o]),r.useEffect(()=>{var e,c;v!==void 0?(e=t.current)==null||e.setEnableScale(v):(c=t.current)==null||c.setEnableScale(!0)},[v]),r.useEffect(()=>{var e;(e=t.current)==null||e.setEnableBlur(a??!0)},[a]),r.useEffect(()=>{var e,c,f,R;p!==void 0?((e=t.current)==null||e.setLyricLines(p),(c=t.current)==null||c.update()):((f=t.current)==null||f.setLyricLines([]),(R=t.current)==null||R.update())},[p]),r.useEffect(()=>{var e,c;n!==void 0?(e=t.current)==null||e.setCurrentTime(n):(c=t.current)==null||c.setCurrentTime(0)},[n]),r.useEffect(()=>{var e;i!==void 0&&((e=t.current)==null||e.setLinePosXSpringParams(i))},[i]),r.useEffect(()=>{var e;u!==void 0&&((e=t.current)==null||e.setLinePosYSpringParams(u))},[u]),r.useEffect(()=>{var e;s!==void 0&&((e=t.current)==null||e.setLineScaleSpringParams(s))},[s]),r.useEffect(()=>{var e;if(B){const c=f=>B(f);return(e=t.current)==null||e.addEventListener("line-click",c),()=>{var f;return(f=t.current)==null?void 0:f.removeEventListener("line-click",c)}}},[B]),r.useEffect(()=>{var e;if(F){const c=f=>F(f);return(e=t.current)==null||e.addEventListener("line-contextmenu",c),()=>{var f;return(f=t.current)==null?void 0:f.removeEventListener("line-contextmenu",c)}}},[F]),r.useImperativeHandle(L,()=>({wrapperEl:y.current,lyricPlayer:t.current}),[y.current,t.current]),q.jsxs(q.Fragment,{children:[q.jsx("div",{...A,ref:y}),(h=t.current)!=null&&h.getBottomLineElement()&&w?k.createPortal(w,(j=t.current)==null?void 0:j.getBottomLineElement()):null]})});exports.BackgroundRender=H;exports.LyricPlayer=T;
//# sourceMappingURL=amll-react.js.map
