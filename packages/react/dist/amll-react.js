"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const w=require("react/jsx-runtime"),F=require("@applemusic-like-lyrics/core"),r=require("react"),g=require("react-dom"),h=r.forwardRef(({albumImageUrl:d,fps:f,playing:i,flowSpeed:a,renderScale:o,staticMode:l,...p},m)=>{const c=r.useRef(),E=r.useRef(null);return r.useEffect(()=>(c.current=new F.BackgroundRender,()=>{var t;(t=c.current)==null||t.dispose()}),[]),r.useEffect(()=>{var t;d&&((t=c.current)==null||t.setAlbumImage(d))},[d]),r.useEffect(()=>{var t;f&&((t=c.current)==null||t.setFPS(f))},[f]),r.useEffect(()=>{var t,s,u;i===void 0?(t=c.current)==null||t.resume():i?(s=c.current)==null||s.resume():(u=c.current)==null||u.pause()},[i]),r.useEffect(()=>{var t;a&&((t=c.current)==null||t.setFlowSpeed(a))},[a]),r.useEffect(()=>{var t;(t=c.current)==null||t.setStaticMode(l)},[l]),r.useEffect(()=>{var t;o&&((t=c.current)==null||t.setRenderScale(o))},[o]),r.useEffect(()=>{var t;if(c.current){const s=c.current.getElement();s.style.width="100%",s.style.height="100%",(t=E.current)==null||t.appendChild(s)}}),r.useImperativeHandle(m,()=>({wrapperEl:E.current,bgRender:c.current}),[E.current,c.current]),w.jsx("div",{...p,ref:E})}),j=r.forwardRef(({disabled:d,alignAnchor:f,enableSpring:i,enableBlur:a,lyricLines:o,currentTime:l,linePosXSpringParams:p,linePosYSpringParams:m,lineScaleSpringParams:c,bottomLine:E,...t},s)=>{var q,v;const u=r.useRef(),y=r.useRef(null);return r.useEffect(()=>(u.current=new F.LyricPlayer,()=>{var e;(e=u.current)==null||e.dispose()}),[]),r.useEffect(()=>{if(!d){let e=!1,n=-1;const L=R=>{var B;e||(n===-1&&(n=R),(B=u.current)==null||B.update(R-n),n=R,requestAnimationFrame(L))};return requestAnimationFrame(L),()=>{e=!0}}},[d]),r.useEffect(()=>{var e;u.current&&((e=y.current)==null||e.appendChild(u.current.getElement()))},[y.current]),r.useEffect(()=>{var e;f&&((e=u.current)==null||e.setAlignAnchor(f))},[f]),r.useEffect(()=>{var e,n;i?(e=u.current)==null||e.setEnableSpring(i):(n=u.current)==null||n.setEnableSpring(!0)},[i]),r.useEffect(()=>{var e;(e=u.current)==null||e.setEnableBlur(a??!0)},[a]),r.useEffect(()=>{var e,n,L,R;o?((e=u.current)==null||e.setLyricLines(o),(n=u.current)==null||n.update()):((L=u.current)==null||L.setLyricLines([]),(R=u.current)==null||R.update())},[o]),r.useEffect(()=>{var e,n;l?(e=u.current)==null||e.setCurrentTime(l):(n=u.current)==null||n.setCurrentTime(0)},[l]),r.useEffect(()=>{var e;p&&((e=u.current)==null||e.setLinePosXSpringParams(p))},[p]),r.useEffect(()=>{var e;m&&((e=u.current)==null||e.setLinePosYSpringParams(m))},[m]),r.useEffect(()=>{var e;c&&((e=u.current)==null||e.setLineScaleSpringParams(c))},[c]),r.useImperativeHandle(s,()=>({wrapperEl:y.current,lyricPlayer:u.current}),[y.current,u.current]),w.jsxs(w.Fragment,{children:[w.jsx("div",{...t,ref:y}),(q=u.current)!=null&&q.getBottomLineElement()&&E?g.createPortal(E,(v=u.current)==null?void 0:v.getBottomLineElement()):null]})});exports.BackgroundRender=h;exports.LyricPlayer=j;
//# sourceMappingURL=amll-react.js.map
