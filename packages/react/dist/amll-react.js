"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const q=require("react/jsx-runtime"),h=require("@applemusic-like-lyrics/core"),r=require("react"),j=require("react-dom"),g=r.forwardRef(({albumImageUrl:d,fps:i,playing:E,flowSpeed:o,renderScale:a,staticMode:l,...p},m)=>{const c=r.useRef(),f=r.useRef(null);return r.useEffect(()=>(c.current=new h.BackgroundRender,()=>{var t;(t=c.current)==null||t.dispose()}),[]),r.useEffect(()=>{var t;d&&((t=c.current)==null||t.setAlbumImage(d))},[d]),r.useEffect(()=>{var t;i&&((t=c.current)==null||t.setFPS(i))},[i]),r.useEffect(()=>{var t,s,w;E===void 0?(t=c.current)==null||t.resume():E?(s=c.current)==null||s.resume():(w=c.current)==null||w.pause()},[E]),r.useEffect(()=>{var t;o&&((t=c.current)==null||t.setFlowSpeed(o))},[o]),r.useEffect(()=>{var t;(t=c.current)==null||t.setStaticMode(l)},[l]),r.useEffect(()=>{var t;a&&((t=c.current)==null||t.setRenderScale(a))},[a]),r.useEffect(()=>{var t;if(c.current){const s=c.current.getElement();s.style.width="100%",s.style.height="100%",(t=f.current)==null||t.appendChild(s)}}),r.useImperativeHandle(m,()=>({wrapperEl:f.current,bgRender:c.current}),[f.current,c.current]),q.jsx("div",{...p,ref:f})}),x=r.forwardRef(({disabled:d,alignAnchor:i,alignPosition:E,enableSpring:o,enableBlur:a,lyricLines:l,currentTime:p,linePosXSpringParams:m,linePosYSpringParams:c,lineScaleSpringParams:f,bottomLine:t,...s},w)=>{var v,B;const u=r.useRef(),y=r.useRef(null);return r.useEffect(()=>(u.current=new h.LyricPlayer,()=>{var e;(e=u.current)==null||e.dispose()}),[]),r.useEffect(()=>{if(!d){let e=!1,n=-1;const L=R=>{var F;e||(n===-1&&(n=R),(F=u.current)==null||F.update(R-n),n=R,requestAnimationFrame(L))};return requestAnimationFrame(L),()=>{e=!0}}},[d]),r.useEffect(()=>{var e;u.current&&((e=y.current)==null||e.appendChild(u.current.getElement()))},[y.current]),r.useEffect(()=>{var e;i&&((e=u.current)==null||e.setAlignAnchor(i))},[i]),r.useEffect(()=>{var e;E&&((e=u.current)==null||e.setAlignPosition(E))},[E]),r.useEffect(()=>{var e,n;o?(e=u.current)==null||e.setEnableSpring(o):(n=u.current)==null||n.setEnableSpring(!0)},[o]),r.useEffect(()=>{var e;(e=u.current)==null||e.setEnableBlur(a??!0)},[a]),r.useEffect(()=>{var e,n,L,R;l?((e=u.current)==null||e.setLyricLines(l),(n=u.current)==null||n.update()):((L=u.current)==null||L.setLyricLines([]),(R=u.current)==null||R.update())},[l]),r.useEffect(()=>{var e,n;p?(e=u.current)==null||e.setCurrentTime(p):(n=u.current)==null||n.setCurrentTime(0)},[p]),r.useEffect(()=>{var e;m&&((e=u.current)==null||e.setLinePosXSpringParams(m))},[m]),r.useEffect(()=>{var e;c&&((e=u.current)==null||e.setLinePosYSpringParams(c))},[c]),r.useEffect(()=>{var e;f&&((e=u.current)==null||e.setLineScaleSpringParams(f))},[f]),r.useImperativeHandle(w,()=>({wrapperEl:y.current,lyricPlayer:u.current}),[y.current,u.current]),q.jsxs(q.Fragment,{children:[q.jsx("div",{...s,ref:y}),(v=u.current)!=null&&v.getBottomLineElement()&&t?j.createPortal(t,(B=u.current)==null?void 0:B.getBottomLineElement()):null]})});exports.BackgroundRender=g;exports.LyricPlayer=x;
//# sourceMappingURL=amll-react.js.map
