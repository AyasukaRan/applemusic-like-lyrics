"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("react/jsx-runtime"),v=require("@applemusic-like-lyrics/core"),r=require("react"),q=r.forwardRef(({albumImageUrl:i,fps:d,playing:o,flowSpeed:a,renderScale:E,...l},p)=>{const c=r.useRef(),f=r.useRef(null);return r.useEffect(()=>(c.current=new v.BackgroundRender,()=>{var u;(u=c.current)==null||u.dispose()}),[]),r.useEffect(()=>{var u;i&&((u=c.current)==null||u.setAlbumImage(i))},[i]),r.useEffect(()=>{var u;d&&((u=c.current)==null||u.setFPS(d))},[d]),r.useEffect(()=>{var u,s,t;o===void 0?(u=c.current)==null||u.resume():o?(s=c.current)==null||s.resume():(t=c.current)==null||t.pause()},[o]),r.useEffect(()=>{var u;a&&((u=c.current)==null||u.setFlowSpeed(a))},[a]),r.useEffect(()=>{var u;E&&((u=c.current)==null||u.setRenderScale(E))},[E]),r.useEffect(()=>{var u;if(c.current){const s=c.current.getElement();s.style.width="100%",s.style.height="100%",(u=f.current)==null||u.appendChild(s)}}),r.useImperativeHandle(p,()=>({wrapperEl:f.current,bgRender:c.current}),[f.current,c.current]),m.jsx("div",{...l,ref:f})}),F=r.forwardRef(({enable:i,alignAnchor:d,enableSpring:o,enableBlur:a,lyricLines:E,currentTime:l,linePosXSpringParams:p,linePosYSpringParams:c,lineScaleSpringParams:f,...u},s)=>{const t=r.useRef(),y=r.useRef(null);return r.useEffect(()=>(t.current=new v.LyricPlayer,()=>{var e;(e=t.current)==null||e.dispose()}),[]),r.useEffect(()=>{if(i!==void 0&&i){let e=!1,n=-1;const w=R=>{var L;e||(n===-1&&(n=R),(L=t.current)==null||L.update(R-n),n=R,requestAnimationFrame(w))};return requestAnimationFrame(w),()=>{e=!0}}},[i]),r.useEffect(()=>{var e;t.current&&((e=y.current)==null||e.appendChild(t.current.getElement()))},[y.current]),r.useEffect(()=>{var e;d&&((e=t.current)==null||e.setAlignAnchor(d))},[d]),r.useEffect(()=>{var e,n;o?(e=t.current)==null||e.setEnableSpring(o):(n=t.current)==null||n.setEnableSpring(!0)},[o]),r.useEffect(()=>{var e;(e=t.current)==null||e.setEnableBlur(a??!0)},[a]),r.useEffect(()=>{var e,n,w,R;E?((e=t.current)==null||e.setLyricLines(E),(n=t.current)==null||n.update()):((w=t.current)==null||w.setLyricLines([]),(R=t.current)==null||R.update())},[E]),r.useEffect(()=>{var e,n;l?(e=t.current)==null||e.setCurrentTime(l):(n=t.current)==null||n.setCurrentTime(0)},[l]),r.useEffect(()=>{var e;p&&((e=t.current)==null||e.setLinePosXSpringParams(p))},[p]),r.useEffect(()=>{var e;c&&((e=t.current)==null||e.setLinePosYSpringParams(c))},[c]),r.useEffect(()=>{var e;f&&((e=t.current)==null||e.setLineScaleSpringParams(f))},[f]),r.useImperativeHandle(s,()=>({wrapperEl:y.current,lyricPlayer:t.current}),[y.current,t.current]),m.jsx("div",{...u,ref:y})});exports.BackgroundRender=q;exports.LyricPlayer=F;
//# sourceMappingURL=amll-react.js.map
